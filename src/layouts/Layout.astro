---
import "@/styles/global.css";

import { LinkInfo } from "@/types";
import { Nav } from "@/components/Nav.tsx";
import { MobileNavDrawer } from "@/components/MobileNavDrawer";
interface Props {
  title: string;
}

const { title } = Astro.props;

const links: LinkInfo[] = [
  { name: "Home", path: "/" },
  { name: "Research", path: "/research" },
  { name: "About", path: "/about" },
];
---

<html lang="en" class="h-full dark">
  <head>
    <meta charset="UTF-8" />
    <meta name="description" content={title} />
    <meta name="viewport" content="width=device-width" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <title>{title}</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Open+Sans:ital,wght@0,300..800;1,300..800&family=Roboto:ital,wght@0,200;0,300;0,400;0,600;0,700;0,900;1,200;1,300;1,400;1,600;1,700&display=swap"
      rel="stylesheet"
    />
    <script is:inline>
      // Force dark theme for consistency and prevent flashing
      document.documentElement.classList.add("dark");
      document.documentElement.style.backgroundColor = "black";
      document.documentElement.style.color = "white";
      if (document.body && document.body.style) {
        document.body.style.backgroundColor = "black";
        document.body.style.color = "white";
        document.body.style.minHeight = "100vh";
      }
    </script>
    <style>
      /* Prevent layout flashing with consistent global styles */
      html {
        background-color: black !important;
        color: white !important;
        min-height: 100vh !important;
      }
      body {
        background-color: black !important;
        color: white !important;
        min-height: 100vh !important;
      }
      /* Ensure all route transitions maintain dark background */
      * {
        transition: none !important;
        animation: none !important;
      }
      /* Force landing page content to be visible immediately */
      .landing-content, .landing-title-static, .landing-subtitle-static {
        opacity: 1 !important;
        visibility: visible !important;
        display: block !important;
      }
    </style>
  </head>
  <body class="flex flex-col bg-black text-white min-h-screen">
    <header class="flex justify-between items-center px-6 py-4 border-b border-gray-800 bg-black">
      <a href="/" class="flex items-center gap-2">
        <span class="text-2xl font-semibold text-white">The Veteran Culture Project</span>
      </a>

      <nav class="hidden md:flex items-center space-x-6 text-sm text-white">
        <a href="/" class="hover:underline">Home</a>
        <a href="/research" class="hover:underline">Research</a>
        <a href="/about" class="hover:underline">About</a>
      </nav>
      
      <div class="md:hidden">
        <MobileNavDrawer links={links} client:load />
      </div>
    </header>
    <main class="flex-auto">
      <slot />
    </main>
    <footer class="flex shrink-0 mx-auto bg-black border-t border-zinc-800">
      <span class="flex justify-center p-4 text-sm text-white">
        &copy; {new Date().getFullYear()} VCP
      </span>
    </footer>
  </body>
</html>
